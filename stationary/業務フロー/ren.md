```uml
@startuml
opt ログアウト状態
ユーザー -> Webサーバー : ログイン要求
end

opt ジャンルをクリック
ユーザー -> Webサーバー : ジャンルをクリック
Webサーバー -> DBサーバー : ジャンルを照会
DBサーバー -> Webサーバー : 照会結果
Webサーバー -> ユーザー : ジャンル一覧表示
end

opt アカウント作成
ユーザー -> Webサーバー : ユーザー登録(情報を入力)
Webサーバー -> DBサーバー : ユーザー登録
DBサーバー -> DBサーバー : 登録処理
DBサーバー -> Webサーバー : 登録結果
Webサーバー -> ユーザー : 成功
end

alt 登録成功
Webサーバー -> ユーザー : 登録成功

else 登録失敗
Webサーバー -> ユーザー : 登録失敗
end

opt ログイン
ユーザー -> Webサーバー : ログイン(ID・PASS入力)
Webサーバー -> DBサーバー : ログイン照会
DBサーバー -> DBサーバー : ログイン処理
DBサーバー -> Webサーバー : 認証結果
Webサーバー -> ユーザー : 成功
end

alt ログイン成功

opt 商品検索
ユーザー -> Webサーバー : 検索(商品名)
Webサーバー -> DBサーバー : 検索処理(商品名)
DBサーバー -> DBサーバー : 検索処理
DBサーバー -> Webサーバー : 検索結果
Webサーバー -> ユーザー : 検索結果
end

opt ジャンルをクリック
ユーザー -> Webサーバー : ジャンルをクリック
Webサーバー -> DBサーバー : ジャンルを照会
DBサーバー -> Webサーバー : 照会結果
Webサーバー -> ユーザー : ジャンル一覧表示
end

opt ランキングをクリック
ユーザー -> Webサーバー : ランキングをクリック
Webサーバー -> DBサーバー : ランキングを照会
DBサーバー -> Webサーバー : 照会結果
Webサーバー -> ユーザー : ランキング表示
end

opt 商品クリック(詳細表示)
ユーザー -> Webサーバー : 商品クリック
Webサーバー -> DBサーバー : 商品照会
DBサーバー -> Webサーバー : 照会結果
Webサーバー -> ユーザー : 詳細情報表示
end

alt 在庫あり
opt カートに商品を追加
ユーザー -> Webサーバー : カートに追加
Webサーバー -> DBサーバー : カートに追加された情報を渡す
DBサーバー -> DBサーバー : カート情報を保存
end

opt 削除機能
ユーザー -> Webサーバー : カート内削除
Webサーバー -> DBサーバー : カートに追加された情報を削除
DBサーバー -> DBサーバー : カート情報を保存
Webサーバー -> ユーザー : 削除画面を表示
Webサーバー -> ユーザー : カート内に戻る


opt 購入する
ユーザー -> Webサーバー : 購入ボタンクリック
Webサーバー -> DBサーバー : 購入情報を渡す
DBサーバー -> DBサーバー : 購入された商品の在庫を減らす
end 

else 在庫なし
ユーザー -> Webサーバー : カートに追加
Webサーバー -> DBサーバー : 商品照会
DBサーバー -> Webサーバー : 照会結果
Webサーバー -> ユーザー : 在庫結果
end
end

opt ログアウト
ユーザー -> Webサーバー : ログアウトボタン
Webサーバー -> ユーザー: ログアウト結果
end

else ログイン失敗
Webサーバー -> ユーザー : 認証結果(失敗)
end


@enduml
```
